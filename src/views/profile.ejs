<% const content = (function(){ %>
  <h2>Profile</h2>

  <div style="margin-bottom: 2rem;">
    <p><strong>Username:</strong> <%= user.username %></p>
  </div>

  <h3>Change Password</h3>

  <% if (error) { %>
    <div class="alert alert-error" style="color: red; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid red; background-color: #fee;">
      <%= error %>
    </div>
  <% } %>

  <% if (success) { %>
    <div class="alert alert-success" style="color: green; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid green; background-color: #efe;">
      <%= success %>
    </div>
  <% } %>

  <form method="post" action="/profile/change-password" class="form" style="max-width: 400px;">
    <div>
      <label>Current Password
        <input type="password" name="current_password" required>
      </label>
    </div>
    <div>
      <label>New Password
        <input type="password" name="new_password" required>
      </label>
    </div>
    <div>
      <label>Confirm New Password
        <input type="password" name="confirm_password" required>
      </label>
    </div>
    <div>
      <button type="submit" class="btn">Change Password</button>
      <a href="/library" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
<% })(); %>
<%- include('partials/layout', { body: content }) %>
