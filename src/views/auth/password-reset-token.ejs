<%
const content = `
  <h2>Generate Password Reset Token</h2>
  <p>Create a password reset token for a user who has forgotten their password.</p>
  
  ${error ? `<div class="alert alert-error">${error}</div>` : ''}
  
  ${resetToken && resetLink ? `
    <div class="alert alert-success">
      <p><strong>Password reset token created successfully!</strong></p>
      <p>Share this link with the user:</p>
      <div style="background: #f5f5f5; padding: 1rem; border-radius: 4px; word-break: break-all; margin: 1rem 0;">
        <code>${resetLink}</code>
      </div>
      <p><small>Token expires: ${resetToken.expires_at ? new Date(resetToken.expires_at).toLocaleString() : 'Never'}</small></p>
    </div>
  ` : ''}
  
  <form method="post" action="/password-reset-token" class="form">
    <input type="hidden" name="_csrf" value="${csrfToken}">
    <label>
      User
      <select name="user_id" required>
        <option value="">-- Select a user --</option>
        ${users.map(u => `<option value="${u.id}" ${values.user_id == u.id ? 'selected' : ''}>${u.username}</option>`).join('')}
      </select>
    </label>
    
    <label>
      Expires in (hours)
      <input type="number" name="expires_in_hours" min="1" step="1" placeholder="Leave empty for no expiration" value="${values.expires_in_hours || ''}">
      <small>Optional. How many hours until the token expires.</small>
    </label>
    
    <button class="btn" type="submit">Generate Reset Token</button>
    <a href="/profile" class="btn btn-secondary">Cancel</a>
  </form>
`;
%>
<%- include('../partials/layout', { body: content }) %>
